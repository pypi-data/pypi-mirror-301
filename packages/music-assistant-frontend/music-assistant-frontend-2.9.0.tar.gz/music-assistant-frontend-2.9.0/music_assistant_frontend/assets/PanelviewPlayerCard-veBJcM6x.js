import{r as x,x as I,c as s,e as g,X as ee,i as Z,w as t,Y as le,D as ae,a6 as k,d as J,_ as $,f as y,g as V,t as c,u as r,j as w,ac as q,b as d,ah as U,h as v,F as oe,a1 as L,W as z,M as ie,V as M,Z as se,s as B,U as te}from"./index-BXI2qIml.js";import{b as Q,t as re,V as ne,M as de,i as pe,c as ue}from"./VCheckbox-CHc9r84S.js";import{B as S}from"./Button-B3YUuwUS.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as me}from"./VSlider-BuEL8ffM.js";import{V as T,w as b,z as ye}from"./VListItem-BqDOQjsf.js";import{V as ve,a as ce}from"./VList-Oj0sJwE3.js";import{e as fe}from"./eventbus-BJAYFFrB.js";import{V as _e}from"./VCard-zMIp_65-.js";const he={props:{width:String,height:String,style:String,isPowered:Boolean,allowWheel:Boolean},emits:["update:model-value"],setup(_,i){const m=x(!0),o=I(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:m.value?0:10,step:2,elevation:0,style:`width: ${_.width}; height:${_.height}; display: inline-grid; ${_.style}`,disabled:!_.isPowered})),C=I(()=>({...o.value,...i}));return{isThumbHidden:m,playerVolumeProps:C,onWheel:({deltaY:a})=>{if(!_.allowWheel)return;const l=C.value.step,p=i.attrs["model-value"],u=a<0?l:-l;i.emit("update:model-value",p+u)}}}};function ge(_,i,m,o,C,e){return s(),g(me,ae(o.playerVolumeProps,{onTouchstart:i[0]||(i[0]=a=>o.isThumbHidden=!1),onTouchend:i[1]||(i[1]=a=>o.isThumbHidden=!0),onMouseenter:i[2]||(i[2]=a=>o.isThumbHidden=!1),onMouseleave:i[3]||(i[3]=a=>o.isThumbHidden=!0),onWheel:k(o.onWheel,["prevent"]),"onUpdate:modelValue":i[4]||(i[4]=a=>_.$emit("update:model-value",a))}),ee({_:2},[Z(_.$slots,(a,l)=>({name:l,fn:t(()=>[le(_.$slots,l,{},void 0,!0)])}))]),1040,["onWheel"])}const K=A(he,[["render",ge],["__scopeId","data-v-da9138d2"]]),we={class:"text-caption volumecaption"},be={key:1},ke={class:"text-caption volumecaption"},Ce=J({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},hideHeadingRow:{type:Boolean}},setup(_){const i=_;let m;const o=function(e,a=!0){var p,u,h;const l=[];a&&e.type!=q.GROUP&&l.push(e);for(const f of e.group_childs){const n=(p=d)==null?void 0:p.players[f];n&&n.available&&!l.includes(n)&&l.push(n)}if(i.showSyncControls&&e.type==q.PLAYER)for(const f of Object.keys((u=d)==null?void 0:u.players)){const n=(h=d)==null?void 0:h.players[f];n.provider===e.provider&&n.available&&(n.synced_to&&n.synced_to!=e.player_id||n.active_group&&n.active_group!=e.player_id||n.active_source&&n.state==L.PLAYING&&![e.player_id,n.player_id].includes(n.active_source)||l.includes(n)||l.push(n))}return l.sort((f,n)=>f.display_name.toUpperCase()>n.display_name.toUpperCase()?1:-1),l},C=function(e,a){a?(d.players[i.player.player_id].group_childs.push(e),clearTimeout(m),m=setTimeout(()=>{d.playerCommandSyncMany(i.player.player_id,d.players[i.player.player_id].group_childs)},1e3)):(d.players[i.player.player_id].group_childs=d.players[i.player.player_id].group_childs.filter(l=>l!=e),d.playerCommandPower(e,!1))};return(e,a)=>(s(),g(ce,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:t(()=>[e.hideHeadingRow?w("",!0):(s(),g(T,{key:0,class:"volumesliderrow",link:!1,style:$(e.player.powered?"opacity: 1":"opacity: 0.6"),onClick:a[0]||(a[0]=k(()=>{},["stop"]))},{prepend:t(()=>[y(b,{size:25,icon:e.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:t(()=>[V("h5",null,c(r(Q)(e.player,27)),1)]),_:1},8,["style"])),y(T,{class:"volumesliderrow",link:!1,style:$(e.player.powered?"opacity: 0.75":"opacity: 0.35"),onClick:a[3]||(a[3]=k(()=>{},["stop"]))},{prepend:t(()=>[y(S,{icon:"",style:{height:"25px"},disabled:e.player.type==r(q).GROUP||e.player.group_childs.length>0,onClick:a[1]||(a[1]=l=>r(d).playerCommandMuteToggle(e.player.player_id))},{default:t(()=>[y(b,{size:25,icon:e.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:t(()=>[y(K,{color:"secondary",width:"100%","is-powered":e.player.powered,disabled:!e.player.available||!e.player.powered||!e.player.supported_features.includes(r(U).VOLUME_SET)&&!e.player.group_childs.length,"model-value":Math.round(e.player.group_childs.length?e.player.group_volume:e.player.volume_level),"onUpdate:modelValue":a[2]||(a[2]=l=>e.player.group_childs.length>0?r(d).playerCommandGroupVolume(e.player.player_id,l):r(d).playerCommandVolumeSet(e.player.player_id,l))},null,8,["is-powered","disabled","model-value"])]),append:t(()=>[V("div",we,c(Math.round(e.player.group_childs.length?e.player.group_volume:e.player.volume_level)),1)]),_:1},8,["style"]),e.showSubPlayers&&e.player.powered&&(e.player.group_childs.length>0||e.showSyncControls)?(s(),v("div",be,[y(ve,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(s(!0),v(oe,null,Z(o(e.player,!e.showSyncControls),l=>(s(),v("div",{key:l.player_id},[y(T,{class:"volumesliderrow",link:!1,style:$(l.powered||e.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:a[4]||(a[4]=k(()=>{},["stop"]))},{prepend:t(()=>[y(b,{size:30,icon:l.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:t(()=>[V("h6",null,c(r(re)(l.display_name,27)),1)]),append:t(()=>[e.showSyncControls?(s(),g(ne,{key:0,ripple:!1,disabled:l.player_id==e.player.player_id,"model-value":e.player.group_childs.includes(l.player_id)||l.player_id==e.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":p=>C(l.player_id,p)},null,8,["disabled","model-value","onUpdate:modelValue"])):w("",!0)]),_:2},1032,["style"]),y(T,{class:"volumesliderrow",disabled:!l.supported_features.includes(r(U).VOLUME_SET),link:!1,style:$(l.powered?"opacity: 0.75":"opacity: 0.4"),onClick:a[5]||(a[5]=k(()=>{},["stop"]))},{prepend:t(()=>[y(S,{icon:"",style:{height:"25px"},onClick:p=>r(d).playerCommandMuteToggle(l.player_id)},{default:t(()=>[y(b,{size:25,icon:l.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["onClick"])]),default:t(()=>[y(K,{color:"secondary",width:"100%","is-powered":l.powered,disabled:!l.available||!l.supported_features.includes(r(U).VOLUME_SET),"model-value":Math.round(l.volume_level),"onUpdate:modelValue":p=>r(d).playerCommandVolumeSet(l.player_id,p)},null,8,["is-powered","disabled","model-value","onUpdate:modelValue"])]),append:t(()=>[V("div",ke,c(l.volume_level),1)]),_:2},1032,["disabled","style"]),a[6]||(a[6]=V("div",{style:{height:"14px"}},null,-1))]))),128))])):w("",!0)]),_:1}))}}),Ve=A(Ce,[["__scopeId","data-v-9cab8b30"]]),Se={key:0,class:"player-media-thumb"},Pe={key:1},ze={key:2,class:"icon-thumb"},Te={style:{"margin-bottom":"3px"}},$e={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},Me={key:0},Be={key:0},qe={key:1},Ie={key:2},Ue={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},Le={key:0},Ae={key:1},Ee={key:2},De={key:3},Oe={key:4},We={key:5},He={key:6},Ne=J({__name:"PanelviewPlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(_){const i=_,m=I(()=>{if(i.player&&i.player.active_source in d.queues)return d.queues[i.player.active_source];if(i.player&&i.player.player_id in d.queues)return d.queues[i.player.player_id]}),o=I(()=>{if(m.value&&m.value.active)return m.value.current_item}),C=function(e){var l,p;const a=[{label:i.player.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{d.playerCommandPowerToggle(i.player.player_id)},icon:"mdi-power"}];(l=m==null?void 0:m.value)!=null&&l.items&&a.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(d.queues).filter(u=>u.queue_id!=m.value.queue_id&&u.available).map(u=>({label:u.display_name,labelArgs:[],action:()=>{d.queueCommandTransfer(m.value.queue_id,u.queue_id),B.activePlayerId=u.queue_id}})).sort((u,h)=>{var f;return u.label.toUpperCase()>((f=h.label)==null?void 0:f.toUpperCase())?1:-1})}),(p=m==null?void 0:m.value)!=null&&p.items&&a.push({label:"queue_clear",labelArgs:[],action:()=>{d.queueCommandClear(m.value.queue_id)},icon:"mdi-cancel"}),a.push({label:"settings.player_settings",labelArgs:[],action:()=>{B.showFullscreenPlayer=!1,B.showPlayersMenu=!1,te.push(`/settings/editplayer/${i.player.player_id}`)},icon:"mdi-cog-outline"}),fe.emit("contextmenu",{items:a,posX:e.clientX,posY:e.clientY})};return(e,a)=>(s(),g(_e,{flat:"",class:se(["panel-item",{"panel-item-selected":e.player.player_id==r(B).activePlayerId,"panel-item-idle":e.player.state==r(L).IDLE,"panel-item-off":!e.player.powered}]),ripple:!1},{default:t(()=>[y(T,{class:"panel-item-details",flat:"",ripple:!1},{prepend:t(()=>{var l,p,u,h;return[e.player.powered?(s(),v("div",Se,[(l=o.value)!=null&&l.media_item||(p=o.value)!=null&&p.image?(s(),g(de,{key:0,class:"media-thumb",size:"55",item:((u=o.value)==null?void 0:u.media_item)||o.value,fallback:r(pe)},null,8,["item","fallback"])):(h=e.player.current_media)!=null&&h.image_url?(s(),v("div",Pe,[y(ye,{class:"media-thumb",size:"55",src:e.player.current_media.image_url},null,8,["src"])])):(s(),v("div",ze,[y(b,{size:"35",icon:e.player.type==r(q).PLAYER&&e.player.group_childs.length?"mdi-speaker-multiple":e.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])):w("",!0)]}),title:t(()=>[V("div",Te,c(r(Q)(e.player,27)),1)]),subtitle:t(()=>{var l,p,u,h,f,n,P;return[e.player.powered?(s(),v("div",$e,[(l=o.value)!=null&&l.media_item?(s(),v("div",Me,[z(c((p=o.value)==null?void 0:p.media_item.name)+" ",1),"version"in((u=o.value)==null?void 0:u.media_item)&&((h=o.value)!=null&&h.media_item.version)?(s(),v("span",Be,"("+c((f=o.value)==null?void 0:f.media_item.version)+")",1)):w("",!0)])):o.value?(s(),v("div",qe,c((n=o.value)==null?void 0:n.name),1)):(P=e.player.current_media)!=null&&P.title?(s(),v("div",Ie,c(e.player.current_media.title),1)):w("",!0)])):w("",!0)]}),default:t(()=>{var l,p,u,h,f,n,P,E,D,O,W,H,N,R,Y,G,F,j,X;return[V("div",Ue,[e.player.powered?(l=o.value)!=null&&l.media_item&&((u=(p=o.value)==null?void 0:p.media_item)==null?void 0:u.media_type)==r(ie).TRACK&&"album"in((h=o.value)==null?void 0:h.media_item)&&((f=o.value)!=null&&f.media_item.album)?(s(),v("div",Ae,c(r(ue)((n=o.value)==null?void 0:n.media_item.artists))+" â€¢ "+c((P=o.value)==null?void 0:P.media_item.album.name),1)):(E=o.value)!=null&&E.media_item&&"artists"in((D=o.value)==null?void 0:D.media_item)&&((O=o.value)==null?void 0:O.media_item.artists.length)>0?(s(),v("div",Ee,c((W=o.value)==null?void 0:W.media_item.artists[0].name),1)):(N=(H=o.value)==null?void 0:H.streamdetails)!=null&&N.stream_title?(s(),v("div",De,c((Y=(R=o.value)==null?void 0:R.streamdetails)==null?void 0:Y.stream_title),1)):(F=(G=o.value)==null?void 0:G.media_item)!=null&&F.metadata.description?(s(),v("div",Oe,c((j=o.value)==null?void 0:j.media_item.metadata.description),1)):((X=m.value)==null?void 0:X.items)==0?(s(),v("div",We,c(e.$t("queue_empty")),1)):e.player.active_source!=e.player.player_id?(s(),v("div",He,c(e.$t("external_source_active",[e.player.active_source])),1)):w("",!0):(s(),v("div",Le,c(e.$t("off")),1))])]}),append:t(()=>{var l;return[e.player.powered?e.player.state==r(L).PLAYING?(s(),g(S,{key:1,class:"player-command-btn",onClick:a[1]||(a[1]=k(p=>r(d).playerCommandPlayPause(e.player.player_id),["stop"]))},{default:t(()=>[y(b,{size:r(M)({breakpoint:"phone"})?"30":"32"},{default:t(()=>a[4]||(a[4]=[z("mdi-pause-circle-outline")])),_:1},8,["size"])]),_:1})):(s(),g(S,{key:2,variant:"icon",class:"player-command-btn",disabled:!((l=m.value)!=null&&l.items)&&!e.player.current_media,onClick:a[2]||(a[2]=k(p=>r(d).playerCommandPlay(e.player.player_id),["stop"]))},{default:t(()=>[y(b,{size:r(M)({breakpoint:"phone"})?"30":"32"},{default:t(()=>a[5]||(a[5]=[z("mdi-play-circle-outline")])),_:1},8,["size"])]),_:1},8,["disabled"])):(s(),g(S,{key:0,variant:"icon",class:"player-command-btn",onClick:a[0]||(a[0]=k(p=>r(d).playerCommandPowerToggle(e.player.player_id),["stop"]))},{default:t(()=>[y(b,{size:r(M)({breakpoint:"phone"})?"30":"32"},{default:t(()=>a[3]||(a[3]=[z("mdi-power")])),_:1},8,["size"])]),_:1})),e.showMenuButton?(s(),g(S,{key:3,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:k(C,["stop"])},{default:t(()=>[y(b,{size:r(M)({breakpoint:"phone"})?"30":"32"},{default:t(()=>a[6]||(a[6]=[z("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):w("",!0)]}),_:1}),e.showVolumeControl&&e.player.powered?(s(),g(Ve,{key:0,player:e.player,"show-sync-controls":e.showSyncControls,"hide-heading-row":!0,"show-sub-players":e.showSubPlayers},null,8,["player","show-sync-controls","show-sub-players"])):w("",!0)]),_:1},8,["class"]))}}),Qe=A(Ne,[["__scopeId","data-v-09a0b69e"]]);export{K as P,Ve as V,Qe as a};
