import{C as M}from"./Container-CyLsZkwx.js";import{d as f,o as B,l as g,c as o,e as w,w as r,Y as D,u as _,V as H,h as u,f as i,g as C,t as b,_ as T,F as P,i as k,M as v,j as $,U as I,s as n,b as l,r as L,ae as E,af as F,a1 as y,x as N,K as O,ag as U}from"./index-BXI2qIml.js";import{p as j,k as W,l as A}from"./VCheckbox-CHc9r84S.js";import{P as Y}from"./PanelviewItemCompact-CN1qE3EN.js";import{w as V,y as G}from"./VListItem-BqDOQjsf.js";import{V as K,T as q}from"./Toolbar-BIkV8o49.js";import{V as S}from"./VToolbar-7C-gZgX7.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as z}from"./PanelviewPlayerCard-veBJcM6x.js";/* empty css              */import"./eventbus-BJAYFFrB.js";import"./VCheckboxBtn-D9hm3Yab.js";import"./VList-Oj0sJwE3.js";import"./VCardText-Cn4KBJZu.js";import"./VCard-zMIp_65-.js";import"./VMenu-B1bAKgcw.js";import"./Button-B3YUuwUS.js";import"./VSlider-BuEL8ffM.js";const J=f({__name:"Carousel",setup(m){return B(()=>{document.documentElement.style.setProperty("--swiper-navigation-color","primary")}),(s,p)=>{const t=g("swiper");return o(),w(t,{"slides-per-view":_(j)(s.$vuetify.display.width)+.5,"space-between":24,"free-mode":!0,navigation:!_(H)({breakpoint:"mobile"})},{default:r(()=>[D(s.$slots,"default")]),_:3},8,["slides-per-view","navigation"])}}}),Q={key:0,class:"widget-row"},X={class:"mr-3"},Z={key:1,class:"mr-3"},x=f({__name:"HomeWidgetRow",props:{widgetRow:{}},setup(m){const s=function(e,a,c){const d=Array.isArray(e)?e:[e];W(d,void 0,a,c)},p=function(e,a,c){if(!A(e)){s(e,a,c);return}e.media_type==v.FOLDER?I.push({name:"browse",query:{path:e.path}}):I.push({name:e.media_type,params:{itemId:e.item_id,provider:e.provider}})},t=function(e,a,c){if(!A(e)){s(e,a,c);return}if(!n.activePlayerId){n.showPlayersMenu=!0;return}l.playMedia(e.uri,void 0)};return(e,a)=>{const c=g("swiper-slide");return e.widgetRow.items.length?(o(),u("div",Q,[i(S,{class:"header",color:"transparent",style:T(e.widgetRow.path?"cursor: pointer; width: fit-content;":"width: fit-content;"),onClick:a[0]||(a[0]=d=>e.widgetRow.path?e.$router.push(e.widgetRow.path):"")},{prepend:r(()=>[i(V,{icon:e.widgetRow.icon},null,8,["icon"])]),title:r(()=>[e.widgetRow.count?(o(),w(K,{key:0,inline:"",color:"grey",content:e.widgetRow.count},{default:r(()=>[C("span",X,b(e.$t(e.widgetRow.label)),1)]),_:1},8,["content"])):(o(),u("span",Z,b(e.$t(e.widgetRow.label)),1))]),_:1},8,["style"]),i(J,null,{default:r(()=>[(o(!0),u(P,null,k(e.widgetRow.items,d=>(o(),w(c,{key:d.uri},{default:r(()=>[i(Y,{item:d,"permanent-overlay":![_(v).ALBUM,_(v).TRACK,_(v).RADIO].includes(d.media_type),onMenu:s,onClick:p,onPlay:t},null,8,["item","permanent-overlay"])]),_:2},1024))),128))]),_:1})])):$("",!0)}}}),ee=R(x,[["__scopeId","data-v-00198094"]]),te=f({__name:"HomeWidgetRows",async setup(m){let s,p;const t=L({recently_played:{label:"recently_played",icon:"mdi-motion-play",items:[]},artists:{label:"artists",icon:"mdi-account-music",path:"/artists",items:[]},albums:{label:"albums",icon:"mdi-album",path:"/albums",items:[]},playlists:{label:"playlists",icon:"mdi-playlist-music",path:"/playlists",items:[]},tracks:{label:"tracks",icon:"mdi-file-music",path:"/tracks",items:[]},radios:{label:"radios",icon:"mdi-radio",path:"/radios",items:[]},browse:{label:"browse",icon:"mdi-folder",path:"/browse",items:[]}}),e=async function(){t.value.recently_played.items=await l.getRecentlyPlayedItems(10),t.value.artists.items=await l.getLibraryArtists(void 0,void 0,20,void 0,"random"),t.value.artists.count=n.libraryArtistsCount,t.value.albums.items=await l.getLibraryAlbums(void 0,void 0,20,void 0,"timestamp_added_desc"),t.value.albums.count=n.libraryAlbumsCount,t.value.playlists.items=await l.getLibraryPlaylists(void 0,void 0,20,void 0,"timestamp_added_desc"),t.value.playlists.count=n.libraryPlaylistsCount,t.value.radios.items=await l.getLibraryRadios(void 0,void 0,20,void 0,"timestamp_added_desc"),t.value.radios.count=n.libraryRadiosCount,t.value.tracks.items=await l.getLibraryTracks(void 0,void 0,20,void 0,"timestamp_added_desc"),t.value.tracks.count=n.libraryTracksCount};return[s,p]=E(()=>e()),await s,p(),F(()=>{e()}),(a,c)=>(o(!0),u(P,null,k(t.value,d=>(o(),u("div",{key:d.label},[i(ee,{"widget-row":d},null,8,["widget-row"])]))),128))}}),ae={key:0,class:"widget-row"},se={class:"mr-3"},ie=f({__name:"HomeCurrentlyPlayingRow",setup(m){const s={[y.PLAYING]:1,[y.PAUSED]:2,[y.IDLE]:2},p=N(()=>Object.values(l.players).filter(e=>e.powered&&!e.synced_to&&!e.active_group&&[y.PLAYING,y.PAUSED].includes(e.state)).sort((e,a)=>e.display_name.localeCompare(a.display_name)).sort((e,a)=>s[e.state]-s[a.state]));function t(e){e&&e.player_id in l.players&&(n.activePlayerId==e.player_id?n.showFullscreenPlayer=!0:n.activePlayerId=e.player_id)}return(e,a)=>{const c=g("swiper-slide"),d=g("swiper");return p.value.length?(o(),u("div",ae,[i(S,{class:"header",color:"transparent",style:{width:"fit-content"}},{prepend:r(()=>[i(V,{icon:"mdi-play-circle-outline"})]),title:r(()=>[C("span",se,b(e.$t("currently_playing")),1)]),_:1}),i(d,null,{default:r(()=>[(o(!0),u(P,null,k(p.value,h=>(o(),w(c,{key:h.player_id,style:{"max-width":"340px",width:"340px"}},{default:r(()=>[i(z,{player:h,style:{width:"300px",height:"80px","max-height":"80px"},onClick:ne=>t(h)},null,8,["player","onClick"])]),_:2},1024))),128))]),_:1})])):$("",!0)}}}),oe=R(ie,[["__scopeId","data-v-a4ad03fa"]]),re=f({__name:"HomeView",props:{player:{}},setup(m){const s=m,p=L(localStorage.getItem("frontend.settings.hide_settings")=="true"),t=new URLSearchParams(window.location.search);return console.log(t.toString()),O(()=>s.player,e=>{if(console.error("props.player",e),!(!e||e=="false")){if(typeof e=="string"){if(e in l.players)n.activePlayerId=l.players[e].player_id;else for(const a of Object.values(l.players))if(a.display_name.toLowerCase()===e.toLowerCase()){n.activePlayerId=a.player_id;break}}n.showFullscreenPlayer=!0}},{immediate:!0}),(e,a)=>(o(),u("div",null,[i(q,{title:"Music Assistant","show-loading":!0,"menu-items":p.value?[]:[{label:"settings.settings",icon:"mdi-cog-outline",action:()=>{e.$router.push({path:"settings"})}}]},null,8,["menu-items"]),i(M,{variant:"panel"},{default:r(()=>[(o(),w(U,null,{fallback:r(()=>[i(G,{indeterminate:""})]),default:r(()=>[C("div",null,[i(oe),i(te)])]),_:1}))]),_:1})]))}}),Ie=R(re,[["__scopeId","data-v-f6630326"]]);export{Ie as default};
