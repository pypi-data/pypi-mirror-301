# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'main_gui.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from rlpp.constants import *
from PyQt5.QtCore import QUrl


# print({QUrl.fromLocalFile(background_path).toString()})
class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(937, 559)
        # MainWindow.setStyleSheet(f"background-image:url(\"{background_path}\");\n")
        MainWindow.setStyleSheet("background-color: rgb(20,25,25)")
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label = EditorDisplayWidget(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(10, 20, 641, 480))
        self.label.setStyleSheet("background-color: rgb(60, 60, 60);\n""")
        self.label.setText("")
        self.label.setObjectName("label")
        self.tabWidget = QtWidgets.QTabWidget(self.centralwidget)
        self.tabWidget.setGeometry(QtCore.QRect(720, 10, 206, 491))
        self.tabWidget.setStyleSheet("background-color: rgb(0, 30, 40);")
        self.tabWidget.setTabPosition(QtWidgets.QTabWidget.North)
        self.tabWidget.setObjectName("tabWidget")
        self.tab_agents = QtWidgets.QWidget()
        self.tab_agents.setObjectName("tab_agents")
        self.Allies_panelWidget_5 = QtWidgets.QWidget(self.tab_agents)
        self.Allies_panelWidget_5.setGeometry(QtCore.QRect(10, 10, 181, 451))
        self.Allies_panelWidget_5.setObjectName("Allies_panelWidget_5")
        # self.pushButton_19 = QtWidgets.QPushButton(self.Allies_panelWidget_5)
        # self.pushButton_19.setGeometry(QtCore.QRect(10, 420, 41, 23))
        # self.pushButton_19.setStyleSheet("color: rgb(255, 255, 255);")
        # self.pushButton_19.setObjectName("pushButton_19")
        self.pushButton_20 = QtWidgets.QPushButton(self.Allies_panelWidget_5)
        self.pushButton_20.setGeometry(QtCore.QRect(70, 420, 41, 23))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.pushButton_20.setFont(font)
        self.pushButton_20.setStyleSheet("color: rgb(255, 255, 255);")
        self.pushButton_20.setObjectName("pushButton_20")
        self.scrollArea_8 = QtWidgets.QScrollArea(self.Allies_panelWidget_5)
        self.scrollArea_8.setGeometry(QtCore.QRect(0, 0, 181, 411))
        self.scrollArea_8.setWidgetResizable(True)
        self.scrollArea_8.setObjectName("scrollArea_8")
        self.scrollAreaWidgetContents_8 = QtWidgets.QWidget()
        self.scrollAreaWidgetContents_8.setGeometry(QtCore.QRect(0, 0, 179, 409))
        self.scrollAreaWidgetContents_8.setObjectName("scrollAreaWidgetContents_8")
        self.verticalLayout_6 = QtWidgets.QVBoxLayout(self.scrollAreaWidgetContents_8)
        self.verticalLayout_6.setObjectName("verticalLayout_6")
        self.pushButton_21 = QtWidgets.QPushButton(self.scrollAreaWidgetContents_8)
        self.pushButton_21.setMinimumSize(QtCore.QSize(60, 60))
        self.pushButton_21.setMaximumSize(QtCore.QSize(60, 60))
        self.pushButton_21.setText("")
        icon = QtGui.QIcon()
        icon.addPixmap(QtGui.QPixmap(RESOURCES_PATH+"/agents/agent_0.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_21.setIcon(icon)
        self.pushButton_21.setIconSize(QtCore.QSize(40, 40))
        self.pushButton_21.setObjectName("pushButton_21")
        # ####### TODO:complete the rest of the button names
        self.pushButton_21.img_path_name = RESOURCES_PATH+"/agents/agent_0.png"
        self.verticalLayout_6.addWidget(self.pushButton_21, 0, QtCore.Qt.AlignHCenter)
        self.scrollArea_8.setWidget(self.scrollAreaWidgetContents_8)
        self.tabWidget.addTab(self.tab_agents, "")
        self.tab_Walls = QtWidgets.QWidget()
        self.tab_Walls.setObjectName("tab_Walls")
        self.Allies_panelWidget_4 = QtWidgets.QWidget(self.tab_Walls)
        self.Allies_panelWidget_4.setGeometry(QtCore.QRect(10, 10, 181, 451))
        self.Allies_panelWidget_4.setObjectName("Allies_panelWidget_4")
        # self.pushButton_10 = QtWidgets.QPushButton(self.Allies_panelWidget_4)
        # self.pushButton_10.setGeometry(QtCore.QRect(10, 420, 41, 23))
        # self.pushButton_10.setStyleSheet("color: rgb(255, 255, 255);")
        # self.pushButton_10.setObjectName("pushButton_10")
        self.pushButton_11 = QtWidgets.QPushButton(self.Allies_panelWidget_4)
        self.pushButton_11.setGeometry(QtCore.QRect(70, 420, 41, 23))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.pushButton_11.setFont(font)
        self.pushButton_11.setStyleSheet("color: rgb(255, 255, 255);")
        self.pushButton_11.setObjectName("pushButton_11")
        self.scrollArea_5 = QtWidgets.QScrollArea(self.Allies_panelWidget_4)
        self.scrollArea_5.setGeometry(QtCore.QRect(0, 0, 181, 411))
        self.scrollArea_5.setWidgetResizable(True)
        self.scrollArea_5.setObjectName("scrollArea_5")
        self.scrollAreaWidgetContents_5 = QtWidgets.QWidget()
        self.scrollAreaWidgetContents_5.setGeometry(QtCore.QRect(0, 0, 179, 409))
        self.scrollAreaWidgetContents_5.setObjectName("scrollAreaWidgetContents_5")
        self.verticalLayout_5 = QtWidgets.QVBoxLayout(self.scrollAreaWidgetContents_5)
        self.verticalLayout_5.setObjectName("verticalLayout_5")
        self.pushButton_18 = QtWidgets.QPushButton(self.scrollAreaWidgetContents_5)
        self.pushButton_18.setMinimumSize(QtCore.QSize(60, 60))
        self.pushButton_18.setMaximumSize(QtCore.QSize(60, 60))
        self.pushButton_18.setText("")
        icon1 = QtGui.QIcon()
        icon1.addPixmap(QtGui.QPixmap(RESOURCES_PATH+"/walls/wall_0.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_18.setIcon(icon1)
        self.pushButton_18.setIconSize(QtCore.QSize(40, 40))
        self.pushButton_18.setObjectName("pushButton_18")
        self.pushButton_18.img_path_name = RESOURCES_PATH+"/walls/wall_0.png"
        self.verticalLayout_5.addWidget(self.pushButton_18, 0, QtCore.Qt.AlignHCenter)
        self.scrollArea_5.setWidget(self.scrollAreaWidgetContents_5)
        self.tabWidget.addTab(self.tab_Walls, "")
        self.tab_Enemies = QtWidgets.QWidget()
        self.tab_Enemies.setObjectName("tab_Enemies")
        self.verticalLayout_2 = QtWidgets.QVBoxLayout(self.tab_Enemies)
        self.verticalLayout_2.setObjectName("verticalLayout_2")
        self.Allies_panelWidget_3 = QtWidgets.QWidget(self.tab_Enemies)
        self.Allies_panelWidget_3.setObjectName("Allies_panelWidget_3")
        # self.pushButton_15 = QtWidgets.QPushButton(self.Allies_panelWidget_3)
        # self.pushButton_15.setGeometry(QtCore.QRect(10, 420, 41, 23))
        # self.pushButton_15.setStyleSheet("color: rgb(255, 255, 255);")
        # self.pushButton_15.setObjectName("pushButton_15")
        self.pushButton_16 = QtWidgets.QPushButton(self.Allies_panelWidget_3)
        self.pushButton_16.setGeometry(QtCore.QRect(70, 420, 41, 23))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.pushButton_16.setFont(font)
        self.pushButton_16.setStyleSheet("color: rgb(255, 255, 255);")
        self.pushButton_16.setObjectName("pushButton_16")
        self.scrollArea_7 = QtWidgets.QScrollArea(self.Allies_panelWidget_3)
        self.scrollArea_7.setGeometry(QtCore.QRect(0, 0, 181, 411))
        self.scrollArea_7.setWidgetResizable(True)
        self.scrollArea_7.setObjectName("scrollArea_7")
        self.scrollAreaWidgetContents_7 = QtWidgets.QWidget()
        self.scrollAreaWidgetContents_7.setGeometry(QtCore.QRect(0, 0, 179, 409))
        self.scrollAreaWidgetContents_7.setObjectName("scrollAreaWidgetContents_7")
        self.verticalLayout_4 = QtWidgets.QVBoxLayout(self.scrollAreaWidgetContents_7)
        self.verticalLayout_4.setObjectName("verticalLayout_4")
        self.pushButton_17 = QtWidgets.QPushButton(self.scrollAreaWidgetContents_7)
        self.pushButton_17.setMinimumSize(QtCore.QSize(60, 60))
        self.pushButton_17.setMaximumSize(QtCore.QSize(60, 60))
        self.pushButton_17.setText("")
        icon2 = QtGui.QIcon()
        icon2.addPixmap(QtGui.QPixmap(RESOURCES_PATH+"/enemies/enemy_0.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_17.setIcon(icon2)
        self.pushButton_17.setIconSize(QtCore.QSize(40, 40))
        self.pushButton_17.setObjectName("pushButton_17")
        self.pushButton_17.img_path_name = RESOURCES_PATH+"/enemies/enemy_0.png"
        self.verticalLayout_4.addWidget(self.pushButton_17, 0, QtCore.Qt.AlignHCenter)
        self.scrollArea_7.setWidget(self.scrollAreaWidgetContents_7)
        self.verticalLayout_2.addWidget(self.Allies_panelWidget_3)
        self.tabWidget.addTab(self.tab_Enemies, "")
        self.tab_Allies = QtWidgets.QWidget()
        self.tab_Allies.setObjectName("tab_Allies")
        self.Allies_panelWidget_6 = QtWidgets.QWidget(self.tab_Allies)
        self.Allies_panelWidget_6.setGeometry(QtCore.QRect(10, 10, 181, 451))
        self.Allies_panelWidget_6.setObjectName("Allies_panelWidget_6")
        # self.pushButton_22 = QtWidgets.QPushButton(self.Allies_panelWidget_6)
        # self.pushButton_22.setGeometry(QtCore.QRect(10, 420, 41, 23))
        # self.pushButton_22.setStyleSheet("color: rgb(255, 255, 255);")
        # self.pushButton_22.setObjectName("pushButton_22")
        self.pushButton_23 = QtWidgets.QPushButton(self.Allies_panelWidget_6)
        self.pushButton_23.setGeometry(QtCore.QRect(70, 420, 41, 23))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.pushButton_23.setFont(font)
        self.pushButton_23.setStyleSheet("color: rgb(255, 255, 255);")
        self.pushButton_23.setObjectName("pushButton_23")
        self.scrollArea_9 = QtWidgets.QScrollArea(self.Allies_panelWidget_6)
        self.scrollArea_9.setGeometry(QtCore.QRect(0, 0, 181, 411))
        self.scrollArea_9.setWidgetResizable(True)
        self.scrollArea_9.setObjectName("scrollArea_9")
        self.scrollAreaWidgetContents_9 = QtWidgets.QWidget()
        self.scrollAreaWidgetContents_9.setGeometry(QtCore.QRect(0, 0, 179, 409))
        self.scrollAreaWidgetContents_9.setObjectName("scrollAreaWidgetContents_9")
        self.verticalLayout_7 = QtWidgets.QVBoxLayout(self.scrollAreaWidgetContents_9)
        self.verticalLayout_7.setObjectName("verticalLayout_7")
        self.pushButton_24 = QtWidgets.QPushButton(self.scrollAreaWidgetContents_9)
        self.pushButton_24.setMinimumSize(QtCore.QSize(60, 60))
        self.pushButton_24.setMaximumSize(QtCore.QSize(60, 60))
        self.pushButton_24.setText("")
        icon3 = QtGui.QIcon()
        icon3.addPixmap(QtGui.QPixmap(RESOURCES_PATH+"/food/food_1.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_24.setIcon(icon3)
        self.pushButton_24.setIconSize(QtCore.QSize(40, 40))
        self.pushButton_24.setObjectName("pushButton_24")
        self.pushButton_24.img_path_name = RESOURCES_PATH+"/food/food_1.png"
        self.verticalLayout_7.addWidget(self.pushButton_24, 0, QtCore.Qt.AlignHCenter)
        self.scrollArea_9.setWidget(self.scrollAreaWidgetContents_9)
        self.tabWidget.addTab(self.tab_Allies, "")
        self.pushButton = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton.setGeometry(QtCore.QRect(660, 32, 51, 51))
        self.pushButton.setStyleSheet("background-color: rgb(20,35,32);")
        self.pushButton.setText("")
        icon4 = QtGui.QIcon()
        icon4.addPixmap(QtGui.QPixmap(jn(ICONS_PATH,"select.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton.setIcon(icon4)
        self.pushButton.setIconSize(QtCore.QSize(30, 30))
        self.pushButton.setObjectName("pushButton")
        self.pushButton_2 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_2.setGeometry(QtCore.QRect(660, 90, 51, 51))
        self.pushButton_2.setStyleSheet("background-color: rgb(20,35,32);")
        self.pushButton_2.setText("")
        icon5 = QtGui.QIcon()
        icon5.addPixmap(QtGui.QPixmap(jn(ICONS_PATH,"stamp.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_2.setIcon(icon5)
        self.pushButton_2.setIconSize(QtCore.QSize(30, 30))
        self.pushButton_2.setObjectName("pushButton_2")
        self.pushButton_3 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_3.setGeometry(QtCore.QRect(660, 150, 51, 51))
        self.pushButton_3.setStyleSheet("background-color: rgb(20,35,32);")
        self.pushButton_3.setText("")
        icon6 = QtGui.QIcon()
        icon6.addPixmap(QtGui.QPixmap(jn(ICONS_PATH,"trash.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_3.setIcon(icon6)
        self.pushButton_3.setIconSize(QtCore.QSize(30, 30))
        self.pushButton_3.setObjectName("pushButton_3")
        self.pushButton_4 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_4.setGeometry(QtCore.QRect(660, 210, 51, 51))
        self.pushButton_4.setStyleSheet("background-color: rgb(20,35,32);")
        self.pushButton_4.setText("")
        icon7 = QtGui.QIcon()
        icon7.addPixmap(QtGui.QPixmap(jn(ICONS_PATH,"rotate.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_4.setIcon(icon7)
        self.pushButton_4.setIconSize(QtCore.QSize(30, 30))
        self.pushButton_4.setObjectName("pushButton_4")
        self.pushButton_5 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_5.setGeometry(QtCore.QRect(660, 270, 51, 51))
        self.pushButton_5.setStyleSheet("background-color: rgb(20,35,32);")
        self.pushButton_5.setText("")
        icon8 = QtGui.QIcon()
        icon8.addPixmap(QtGui.QPixmap(jn(ICONS_PATH,"move.png")), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_5.setIcon(icon8)
        self.pushButton_5.setIconSize(QtCore.QSize(30, 30))
        self.pushButton_5.setObjectName("pushButton_5")
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 937, 22))
        self.menubar.setObjectName("menubar")
        self.menubar.setStyleSheet("color:white")
        
        self.menuFile = QtWidgets.QMenu(self.menubar)
        self.menuFile.setObjectName("menuFile")
        self.menuExport = QtWidgets.QMenu(self.menubar)
        self.menuExport.setObjectName("menuExport")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)
        self.actionNew = QtWidgets.QAction(MainWindow)
        self.actionNew.setObjectName("actionNew")
        self.actionLoad = QtWidgets.QAction(MainWindow)
        self.actionLoad.setObjectName("actionLoad")
        # self.actionExport = QtWidgets.QAction(MainWindow)
        # self.actionExport.setObjectName("actionExport")
        self.actionAs_regular_pygame_objects = QtWidgets.QAction(MainWindow)
        self.actionAs_regular_pygame_objects.setObjectName("actionAs_regular_pygame_objects")
        self.actionAs_AI_agents = QtWidgets.QAction(MainWindow)
        self.actionAs_AI_agents.setObjectName("actionAs_AI_agents")
        self.menuFile.addAction(self.actionNew)
        self.menuFile.addAction(self.actionLoad)
        # self.menuFile.addAction(self.actionExport)
        self.menuExport.addAction(self.actionAs_regular_pygame_objects)
        self.actionAs_regular_pygame_objects.triggered.connect(self.exportRegular)
        self.menuExport.addAction(self.actionAs_AI_agents)
        self.actionAs_AI_agents.triggered.connect(self.exportRegular)
        self.menubar.addAction(self.menuFile.menuAction())
        self.menubar.addAction(self.menuExport.menuAction())

        self.retranslateUi(MainWindow)
        self.tabWidget.setCurrentIndex(3)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "Pygame Designer"))
        # self.pushButton_19.setText(_translate("MainWindow", "erase"))
        self.pushButton_20.setText(_translate("MainWindow", "+"))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_agents), _translate("MainWindow", "Agents"))
        # self.pushButton_10.setText(_translate("MainWindow", "erase"))
        self.pushButton_11.setText(_translate("MainWindow", "+"))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_Walls), _translate("MainWindow", "Walls"))
        # self.pushButton_15.setText(_translate("MainWindow", "erase"))
        self.pushButton_16.setText(_translate("MainWindow", "+"))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_Enemies), _translate("MainWindow", "Enemies"))
        # self.pushButton_22.setText(_translate("MainWindow", "erase"))
        self.pushButton_23.setText(_translate("MainWindow", "+"))
        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_Allies), _translate("MainWindow", "Food"))
        self.menuFile.setTitle(_translate("MainWindow", "File"))
        self.menuExport.setTitle(_translate("MainWindow", "Export"))
        self.actionNew.setText(_translate("MainWindow", "New"))
        self.actionLoad.setText(_translate("MainWindow", "Load"))
        # self.actionExport.setText(_translate("MainWindow", "Export"))
        self.actionAs_regular_pygame_objects.setText(_translate("MainWindow", "As regular pygame objects"))
        self.actionAs_AI_agents.setText(_translate("MainWindow", "As AI agents"))

    def exportRegular(self):
        # export the objects in pygame:
        # for each list of game objects:
        #   for each object:
        #       - object type
        #       - angle
        #       - image_path
        #       - angle
        objectManager.export_JSON()

    def createNewButton(self,file_name,scrollArea,game_object_type):
        # Create a new button
        new_pushButton = QtWidgets.QPushButton(scrollArea)
        new_pushButton.setMinimumSize(QtCore.QSize(60, 60))
        new_pushButton.setMaximumSize(QtCore.QSize(60, 60))
        new_pushButton.setText("")

        # Set the icon for the button
        icon = QtGui.QIcon()
        # Assuming you have a placeholder image path, replace with the actual path
        new_image_path = self.changeRes(file_name, RES)  # Change as needed
        icon.addPixmap(QtGui.QPixmap(new_image_path), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        new_pushButton.setIcon(icon)
        new_pushButton.setIconSize(QtCore.QSize(40, 40))
        new_pushButton.setObjectName(f"pushButton_new_{''.join([str(random.randint(0,9)) for _ in range(8)])}")  # Set a unique object name
        new_pushButton.img_path_name = new_image_path  # Set a unique object name

        # Add the button to the vertical layout
        layout = scrollArea.widget().layout()  # Get the layout from the scroll area
        if layout is not None:
            layout.addWidget(new_pushButton, 0, QtCore.Qt.AlignHCenter)  # Add button to layout
            new_pushButton.clicked.connect(lambda: objectManager.create_new_gameObject(new_pushButton.img_path_name,game_object_type,reset_mode=True))
        else:
            print("No layout found for the scroll area.")
    
    def changeRes(self, file_name,res):
        # Func. def. newDims()
        # Signature: <cv2.image>, SCALE -> (int, int, int)
        # purp. calculate the ratio at which the sprites will need to be multiplied to scale them at the same size
        def newDims(im, SCALE):
            new_w = int(im.shape[1]*SCALE)
            new_h = int(im.shape[0]*SCALE)
            return((new_w, new_h))
        
        new_file_name = os.path.split(file_name)[1].replace(".",f"_{RES}.")
        save_file_name = jn(f"{os.path.split(file_name)[0]}",new_file_name) #where to save the transformed image
        # process the original image and resize
        im = cv2.imread(file_name, cv2.IMREAD_UNCHANGED)
        height_ratio = im.shape[0]/im.shape[1]
        if im.shape[0] >= 512:
            new_dims = (512,int(512 * height_ratio))
        else:
            new_dims = (im.shape[1],im.shape[0])
        im = cv2.resize(im, new_dims)
        # save new image
        cv2.imwrite(save_file_name, im)
        return save_file_name



# DD. DISPLAY_WIDGET
# displayWidget = EditorDisplayWidget(QLabel)
# interp. a child class optimized for event controlling
class EditorDisplayWidget(QtWidgets.QLabel):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setMouseTracking(True)

    def mouseMoveEvent(self, event):
        global_pos = event.globalPos()  # Get global position of the mouse
        local_pos = self.mapFromGlobal(global_pos)
        cursor_settings["POS"] = local_pos.x(), local_pos.y()
        
        
    def enterEvent(self, event):
        cursor_settings["INDISPLAY"] = True

    def leaveEvent(self, event):
        """Restore the cursor when the mouse leaves the widget."""
        cursor_settings["INDISPLAY"] = False

if __name__ == "__main__":
    import sys
    # Enable High DPI scaling
    QApplication.setAttribute(Qt.AA_EnableHighDpiScaling)
    # Use the high-resolution icons and fonts
    QApplication.setAttribute(Qt.AA_UseHighDpiPixmaps)
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
