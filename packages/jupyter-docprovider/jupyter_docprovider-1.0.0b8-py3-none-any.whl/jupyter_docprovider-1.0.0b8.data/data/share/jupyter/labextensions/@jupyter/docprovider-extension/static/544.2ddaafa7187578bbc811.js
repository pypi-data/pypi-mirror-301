"use strict";(self.webpackChunk_jupyter_docprovider_extension=self.webpackChunk_jupyter_docprovider_extension||[]).push([[544],{544:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var r,n=o(909),i=o(200),a=o(256),s=o(313),l=o(922),c=o(710),d=o(154),u=o(480),p=o(614),v=o(678),g=o(697),h=o(192),m=o(766),w=o(473);!function(e){e.openPath="filebrowser:open-path"}(r||(r={}));const b={id:"@jupyter/docprovider-extension:drive",description:"The default collaborative drive provider",provides:h.ICollaborativeDrive,requires:[v.ITranslator],optional:[h.IGlobalAwareness],activate:(e,t,o)=>{const r=t.load("jupyter_collaboration"),n=new m.YDrive(e.serviceManager.user,r,o);return e.serviceManager.contents.addDrive(n),n}},y={id:"@jupyter/docprovider-extension:yfile",description:"Plugin to register the shared model factory for the content type 'file'",autoStart:!0,requires:[h.ICollaborativeDrive],optional:[],activate:(e,t)=>{t.sharedModelFactory.registerDocumentFactory("file",(()=>new g.YFile))}},f={id:"@jupyter/docprovider-extension:ynotebook",description:"Plugin to register the shared model factory for the content type 'notebook'",autoStart:!0,requires:[h.ICollaborativeDrive],optional:[p.ISettingRegistry],activate:(e,t,o)=>{let r=!0;o&&o.load("@jupyterlab/notebook-extension:tracker").then((e=>{const t=e=>{var t;const o=null==e?void 0:e.get("experimentalEnableDocumentWideUndoRedo").composite;r=null===(t=!o)||void 0===t||t};t(e),e.changed.connect((e=>t(e)))})),t.sharedModelFactory.registerDocumentFactory("notebook",(()=>new g.YNotebook({disableDocumentWideUndoRedo:r})))}},x={id:"@jupyter/docprovider-extension:statusBarTimeline",description:"Plugin to add a timeline slider to the status bar",autoStart:!0,requires:[l.IStatusBar,h.ICollaborativeDrive],activate:async(e,t,o)=>{try{let r=null,n=null;const i=async(t,r)=>{if(o){t=t.slice(o.name.length+1),n&&(n.dispose(),n=null);const[i,s]=r.split(":"),l=o.providers.get(`${i}:${s}:${t}`),c=w.URLExt.join(e.serviceManager.serverSettings.baseUrl,"api/collaboration/timeline",t);n=new m.TimelineWidget(c,l,l.contentType,l.format);const d=document.getElementById("jp-slider-status-bar");d&&!n.isAttached&&a.Widget.attach(n,d)}};e.shell.currentChanged&&e.shell.currentChanged.connect((async(e,t)=>{const o=t.newValue;n&&(n.dispose(),n=null),o&&"context"in o&&(await o.context.ready,await i(o.context.path,o.context.model.sharedModel.getState("document_id")))})),t&&(r||(r=new a.Widget,r.addClass("jp-StatusBar-GroupItem"),r.addClass("jp-mod-highlighted"),r.id="jp-slider-status-bar",t.registerStatusItem("jp-slider-status-bar",{item:r,align:"left",rank:4,isActive:()=>{const t=e.shell.currentWidget;return!!t&&"context"in t}})))}catch(e){console.error("Failed to activate statusBarTimeline plugin:",e)}}},I={id:"@jupyter/docprovider-extension:defaultFileBrowser",description:"The default file browser factory provider",provides:s.IDefaultFileBrowser,requires:[h.ICollaborativeDrive,s.IFileBrowserFactory],optional:[n.IRouter,n.JupyterFrontEnd.ITreeResolver,n.ILabShell,v.ITranslator],activate:async(e,t,o,r,n,i,a)=>{const{commands:s}=e,l=(null!=a?a:v.nullTranslator).load("jupyterlab");e.serviceManager.contents.addDrive(t);const c=o.createFileBrowser("filebrowser",{auto:!1,restore:!1,driveName:t.name});return c.node.setAttribute("role","region"),c.node.setAttribute("aria-label",l.__("File Browser Section")),j.restoreBrowser(c,s,r,n,i),c}},_={id:"@jupyter/docprovider-extension:logger",description:"A logging plugin for debugging purposes.",autoStart:!0,optional:[d.ILoggerRegistry,c.IEditorTracker,u.INotebookTracker,v.ITranslator],activate:(e,t,o,r,n)=>{const a=(null!=n?n:v.nullTranslator).load("jupyter_collaboration"),s="https://schema.jupyter.org/jupyter_collaboration/session/v1";if(!t)return void e.serviceManager.events.stream.connect(((e,t)=>{var o,r;t.schema_id===s&&(console.debug(`[${t.room}(${t.path})] ${null!==(o=t.action)&&void 0!==o?o:""}: ${null!==(r=t.msg)&&void 0!==r?r:""}`),"WARNING"===t.level&&(0,i.showDialog)({title:a.__("Warning"),body:a.__(`Two collaborative sessions are accessing the file ${t.path} simultaneously.\n                \nOpening the same file using different views simultaneously is not supported. Please, close one view; otherwise, you might lose some of your progress.`),buttons:[i.Dialog.okButton()]}))}));const l=new Map,c=(e,o)=>{const r=t.getLogger(o.context.path);l.set(o.context.localPath,r),o.disposed.connect((e=>{l.delete(e.context.localPath)}))};o&&o.widgetAdded.connect(c),r&&r.widgetAdded.connect(c),(async()=>{var t,o;const{events:r}=e.serviceManager;for await(const e of r.stream)if(e.schema_id===s){const r=l.get(e.path);null==r||r.log({type:"text",level:e.level.toLowerCase(),data:`[${e.room}] ${null!==(t=e.action)&&void 0!==t?t:""}: ${null!==(o=e.msg)&&void 0!==o?o:""}`}),"WARNING"===e.level&&(0,i.showDialog)({title:a.__("Warning"),body:a.__("Two collaborative sessions are accessing the file %1 simultaneously.\n                \nOpening a document with multiple views simultaneously is not supported. Please close one view; otherwise, you might lose some of your progress.",e.path),buttons:[i.Dialog.warnButton({label:a.__("Ok")})]})}})()}};var j;!function(e){e.restoreBrowser=async function(e,t,o,n,i){const a="jp-mod-restoring";if(e.addClass(a),!o)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(a);const s=async()=>{o.routed.disconnect(s);const l=await(null==n?void 0:n.paths);(null==l?void 0:l.file)||(null==l?void 0:l.browser)?(await e.model.restore(e.id,!1),l.file&&await t.execute(r.openPath,{path:l.file,dontShowBrowser:!0}),l.browser&&await t.execute(r.openPath,{path:l.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(a),(null==i?void 0:i.isEmpty("main"))&&t.execute("launcher:create")};o.routed.connect(s)}}(j||(j={}));const k=[b,y,f,I,_,{id:"@jupyter/docprovider-extension:notebook-cell-executor",description:"Add notebook cell executor that uses REST API instead of kernel protocol over WebSocket.",autoStart:!0,provides:u.INotebookCellExecutor,activate:e=>"true"===w.PageConfig.getOption("serverSideExecution")?new m.NotebookCellServerExecutor({serverSettings:e.serviceManager.serverSettings}):Object.freeze({runCell:u.runCell})},x]}}]);