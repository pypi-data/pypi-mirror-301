"use strict";(self.webpackChunkfirebird=self.webpackChunkfirebird||[]).push([[2076],{7497:($,b,l)=>{if(l.d(b,{a:()=>a}),9121==l.j)var s=l(4438);if(9121==l.j)var p=l(177);const S=9121==l.j?["leftPaneContainer"]:null,j=9121==l.j?["rightPaneContainer"]:null,v=9121==l.j?[[["","header",""]],[["","centralPane",""]],[["","footer",""]],[["","leftPane",""]],[["","rightPane",""]]]:null,x=9121==l.j?["[header]","[centralPane]","[footer]","[leftPane]","[rightPane]"]:null,c=n=>({"flex-basis":n});function z(n,d){}function u(n,d){if(1&n&&(s.j41(0,"div",11),s.SdG(1,3),s.DNE(2,z,0,0,"ng-template",null,0,s.C5r),s.k0s()),2&n){const e=s.XpG();s.Aen(s.eq3(2,c,e.leftPaneWidth+"px"))}}function f(n,d){if(1&n){const e=s.RV6();s.j41(0,"div",12),s.bIt("mousedown",function(r){s.eBV(e);const m=s.XpG();return s.Njj(m.onMouseDownLeft(r))}),s.k0s()}}function o(n,d){if(1&n){const e=s.RV6();s.j41(0,"div",13),s.bIt("mousedown",function(r){s.eBV(e);const m=s.XpG();return s.Njj(m.onMouseDownRight(r))}),s.k0s()}}function t(n,d){}function i(n,d){if(1&n&&(s.j41(0,"div",14),s.SdG(1,4),s.DNE(2,t,0,0,"ng-template",null,1,s.C5r),s.k0s()),2&n){const e=s.XpG();s.Aen(s.eq3(2,c,e.rightPaneWidth+"px"))}}let a=9121==l.j?(()=>{class n{constructor(){this.onEndResizeLeft=new s.bkB,this.onEndResizeRight=new s.bkB,this.onVisibilityChangeRight=new s.bkB,this.onVisibilityChangeLeft=new s.bkB,this.isResizingLeft=!1,this.isResizingRight=!1,this.leftPaneWidth=250,this.rightPaneWidth=250,this.isLeftPaneVisible=!1,this.isRightPaneVisible=!1}onMouseDownLeft(e){this.isResizingLeft=!0,e.preventDefault()}onMouseDownRight(e){this.isResizingRight=!0,e.preventDefault()}onMouseMove(e){if(this.isResizingLeft){const r=window.innerWidth-this.rightPaneWidth-100;this.leftPaneWidth=Math.max(100,Math.min(e.clientX,r)),e.preventDefault()}else if(this.isResizingRight){const r=window.innerWidth-this.leftPaneWidth-100;let m=window.innerWidth-e.clientX;this.rightPaneWidth=Math.max(100,Math.min(m,r)),e.preventDefault()}}onMouseUp(){this.isResizingLeft&&(this.isResizingLeft=!1,this.onEndResizeLeft.emit(this.leftPaneWidth)),this.isResizingRight&&(this.isResizingRight=!1,this.onEndResizeRight.emit(this.rightPaneWidth))}addComponentToLeftPane(e,h){this.leftPaneContainer.clear();const r=this.leftPaneContainer.createComponent(e);return h&&Object.assign(r.instance,h),r}addComponentToRightPane(e,h){this.rightPaneContainer.clear();const r=this.rightPaneContainer.createComponent(e);return h&&Object.assign(r.instance,h),r}toggleLeftPane(){this.isLeftPaneVisible=!this.isLeftPaneVisible,this.onVisibilityChangeLeft.emit(this.isLeftPaneVisible)}toggleRightPane(){this.isRightPaneVisible=!this.isRightPaneVisible,this.onVisibilityChangeRight.emit(this.isRightPaneVisible)}static{this.\u0275fac=function(h){return new(h||n)}}static{this.\u0275cmp=s.VBU({type:n,selectors:[["app-display-shell"]],viewQuery:function(h,r){if(1&h&&(s.GBs(S,7,s.c1b),s.GBs(j,7,s.c1b)),2&h){let m;s.mGM(m=s.lsd())&&(r.leftPaneContainer=m.first),s.mGM(m=s.lsd())&&(r.rightPaneContainer=m.first)}},hostBindings:function(h,r){1&h&&s.bIt("mousemove",function(w){return r.onMouseMove(w)},!1,s.EBC)("mouseup",function(){return r.onMouseUp()},!1,s.EBC)},outputs:{onEndResizeLeft:"onEndResizeLeft",onEndResizeRight:"onEndResizeRight",onVisibilityChangeRight:"onVisibilityChangeRight",onVisibilityChangeLeft:"onVisibilityChangeLeft"},standalone:!0,features:[s.aNF],ngContentSelectors:x,decls:12,vars:4,consts:[["leftPaneContainer",""],["rightPaneContainer",""],[1,"display-shell"],[1,"header"],[1,"main-content"],["class","pane left-pane",3,"style",4,"ngIf"],["class","divider left-divider",3,"mousedown",4,"ngIf"],[1,"central-pane"],["class","divider right-divider",3,"mousedown",4,"ngIf"],["class","pane right-pane",3,"style",4,"ngIf"],[1,"footer"],[1,"pane","left-pane"],[1,"divider","left-divider",3,"mousedown"],[1,"divider","right-divider",3,"mousedown"],[1,"pane","right-pane"]],template:function(h,r){1&h&&(s.NAR(v),s.j41(0,"div",2)(1,"div",3),s.SdG(2),s.k0s(),s.j41(3,"div",4),s.DNE(4,u,4,4,"div",5)(5,f,1,0,"div",6),s.j41(6,"div",7),s.SdG(7,1),s.k0s(),s.DNE(8,o,1,0,"div",8)(9,i,4,4,"div",9),s.k0s(),s.j41(10,"div",10),s.SdG(11,2),s.k0s()()),2&h&&(s.R7$(4),s.Y8G("ngIf",r.isLeftPaneVisible),s.R7$(),s.Y8G("ngIf",r.isLeftPaneVisible),s.R7$(3),s.Y8G("ngIf",r.isRightPaneVisible),s.R7$(),s.Y8G("ngIf",r.isRightPaneVisible))},dependencies:[p.MD,p.bT],styles:[".display-shell[_ngcontent-%COMP%]{padding-top:62px;margin-top:-62px;display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden;box-sizing:border-box}.main-content[_ngcontent-%COMP%]{box-sizing:border-box;border-top:1px solid #ddd;display:flex;flex:1;overflow:hidden}.pane[_ngcontent-%COMP%]{overflow:auto;min-width:0}.left-pane[_ngcontent-%COMP%], .right-pane[_ngcontent-%COMP%]{background-color:#2e2e2e}.central-pane[_ngcontent-%COMP%]{flex:1;background-color:#424242;overflow:auto}.divider[_ngcontent-%COMP%]{width:5px;cursor:col-resize;background-color:#ccc;-webkit-user-select:none;user-select:none}.left-divider[_ngcontent-%COMP%], .right-divider[_ngcontent-%COMP%]{cursor:col-resize}"]})}}return n})():null},6928:($,b,l)=>{l.d(b,{Gq:()=>t,JX:()=>f});var s=l(467),p=l(7247),S=l.n(p);function v(){return(v=(0,s.A)(function*(a){const n=new(S()),d=new Map;yield n.loadAsync(a);for(const e in n.files){const h=yield n.file(e)?.async("string");h&&d.set(e,h)}return d})).apply(this,arguments)}function x(a){return c.apply(this,arguments)}function c(){return(c=(0,s.A)(function*(a){try{const n=`${x.name}: fetching ${a}`;console.time(n);const d=yield(yield fetch(a)).text();return console.timeEnd(n),d}catch(n){throw console.error(`Error fetching ${a}: ${n}`),n}})).apply(this,arguments)}function z(a){return u.apply(this,arguments)}function u(){return(u=(0,s.A)(function*(a){try{const n=`${z.name}: fetching ${a}`;console.time(n);const d=yield(yield fetch(a)).arrayBuffer();return console.timeEnd(n),d}catch(n){throw console.error(`Error fetching ${a}: ${n}`),n}})).apply(this,arguments)}function f(a){return o.apply(this,arguments)}function o(){return o=(0,s.A)(function*(a){const n=yield z(a);let d;try{console.time("loadZipFileEvents: reading zip contents"),d=yield function j(a){return v.apply(this,arguments)}(n),console.timeEnd("loadZipFileEvents: reading zip contents")}catch(h){throw console.error("Error while reading zip",a,n,h),h}const e={};for(let[h,r]of d){if(!h.endsWith(".json"))continue;const m=`${f.name}: parsing JSON from '${h}'`;console.time(m),console.profile(m),Object.assign(e,JSON.parse(r)),console.timeEnd(m),console.profileEnd(m)}return e}),o.apply(this,arguments)}function t(a){return i.apply(this,arguments)}function i(){return(i=(0,s.A)(function*(a){const n=yield x(a),d={},e=`${t.name}: parsing JSON from '${a}'`;return console.time(e),console.profile(e),Object.assign(d,JSON.parse(n)),console.timeEnd(e),console.profileEnd(e),d})).apply(this,arguments)}},2695:($,b,l)=>{if(l.r(b),l.d(b,{TLinePainter:()=>z}),9121==l.j)var s=l(467);var p=l(6998),S=l(6224),j=l(9025),v=l(6714),x=l(6370);const c=(0,p.BIT)(14);class z extends(9121==l.j?S.JW:null){moveStart(f,o){const t=Math.sqrt((this.x1-this.x2)**2+(this.y1-this.y2)**2),i=Math.sqrt((f-this.x1)**2+(o-this.y1)**2)/t,a=Math.sqrt((f-this.x2)**2+(o-this.y2)**2)/t;this.side=i>.9?1:a>.9?-1:0}moveDrag(f,o){1!==this.side&&(this.x1+=f,this.y1+=o),-1!==this.side&&(this.x2+=f,this.y2+=o),this.draw_g.select("path").attr("d",this.createPath())}moveEnd(f){if(f)return;const o=this.getObject();let t="";o.fX1=this.svgToAxis("x",this.x1,this.isndc),o.fX2=this.svgToAxis("x",this.x2,this.isndc),o.fY1=this.svgToAxis("y",this.y1,this.isndc),o.fY2=this.svgToAxis("y",this.y2,this.isndc),1!==this.side&&(t+=`SetX1(${o.fX1});;SetY1(${o.fY1});;`),-1!==this.side&&(t+=`SetX2(${o.fX2});;SetY2(${o.fY2});;`),this.submitCanvExec(t+"Notify();;")}prepareDraw(){const f=this.getObject();this.isndc=f.TestBit(c);const o=this.getAxisToSvgFunc(this.isndc,!0,!0);this.x1=o.x(f.fX1),this.y1=o.y(f.fY1),this.x2=o.x(f.fX2),this.y2=o.y(f.fY2),this.createAttLine({attr:f})}createPath(){const f=Math.round(this.x1),o=Math.round(this.x2),t=Math.round(this.y1),i=Math.round(this.y2);return`M${f},${t}`+(f===o?`V${i}`:t===i?`H${o}`:`L${o},${i}`)}addExtras(){}redraw(){this.createG(),this.prepareDraw();const f=this.draw_g.append("svg:path").attr("d",this.createPath()).call(this.lineatt.func);return this.getObject()?.$do_not_draw?f.remove():(this.addExtras(f),(0,v.X2)(this),(0,x.wh)(this,x.Ew)),this}static draw(f,o,t){return(0,s.A)(function*(){const i=new z(f,o,t);return(0,j.ensureTCanvas)(i,!1).then(()=>i.redraw())})()}}},9109:($,b,l)=>{if(l.d(b,{Y:()=>j}),9121==l.j)var s=l(467);var p=l(6998),S=l(1069);function j(){return v.apply(this,arguments)}function v(){return(v=(0,s.A)(function*(){const x=this.$fp||this.getFramePainter();if(delete this.$fp,!((0,p.isObject)(x)&&x.grx&&x.gry&&x.grz))return this;const c=this.getObject(),u=c.fP;let f=1,o=0;for(let e=0;e<u.length;e+=3)u[e]<x.scale_xmin||u[e]>x.scale_xmax||u[e+1]<x.scale_ymin||u[e+1]>x.scale_ymax||u[e+2]<x.scale_zmin||u[e+2]>x.scale_zmax||++o;p.settings.OptimizeDraw>0&&o>5e4&&(f=Math.floor(o/5e4),f<=2&&(f=2));const t=Math.floor(o/f),i=new S._l(t,x.webgl,x.size_x3d/100),a=new Int32Array(t);let n=0,d=0;for(let e=0;e<u.length;e+=3)u[e]<x.scale_xmin||u[e]>x.scale_xmax||u[e+1]<x.scale_ymin||u[e+1]>x.scale_ymax||u[e+2]<x.scale_zmin||u[e+2]>x.scale_zmax||f>1&&(n=(n+1)%f,0!==n)||(a[d++]=e,i.addPoint(x.grx(u[e]),x.gry(u[e+1]),x.grz(u[e+2])));return i.createPoints({color:this.getColor(c.fMarkerColor),style:c.fMarkerStyle}).then(e=>(e.tip_color=3===c.fMarkerColor?16711680:65280,e.tip_name=c.fName||"Poly3D",e.poly=c,e.fp=x,e.scale0=.7*i.scale,e.index=a,x.add3DMesh(e,this,!0),e.tooltip=function(h){let r=Math.floor(h.index/this.nvertex);if(r<0||r>=this.index.length)return null;r=this.index[r];const m=this.fp,w=m.grx(this.poly.fP[r]),g=m.gry(this.poly.fP[r+1]),y=m.grz(this.poly.fP[r+2]);return{x1:w-this.scale0,x2:w+this.scale0,y1:g-this.scale0,y2:g+this.scale0,z1:y-this.scale0,z2:y+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+r/3,"x: "+m.axisAsText("x",this.poly.fP[r]),"y: "+m.axisAsText("y",this.poly.fP[r+1]),"z: "+m.axisAsText("z",this.poly.fP[r+2])]}},x.render3D(100),this))})).apply(this,arguments)}},230:($,b,l)=>{if(l.r(b),l.d(b,{TF1Painter:()=>f,produceTAxisLogScale:()=>z,scanTF1Options:()=>u}),9121==l.j)var s=l(467);var p=l(6998),S=l(9041),j=l(6224),v=l(3277),x=l(2953),c=l(3693);function z(o,t,i,a){let n,d;a>0?(d=Math.log(a),n=i>0?Math.log(i):d-5):(d=-10,n=-15),o.fNbins=t,o.fXbins=new Array(t+1);for(let e=0;e<=t;++e)o.fXbins[e]=Math.exp(n+e/t*(d-n));o.fXmin=Math.exp(n),o.fXmax=Math.exp(d)}function u(o){(0,p.isStr)(o)||(o="");let t=o.indexOf(";webcanv_hist"),i=!1,a=0;return t>=0&&(i=!0,o=o.slice(0,t)),t=o.indexOf(";force_saved"),t>=0&&(a=2,o=o.slice(0,t)),t=o.indexOf(";prefer_saved"),t>=0&&(a=1,o=o.slice(0,t)),{opt:o,webcanv_hist:i,use_saved:a}}class f extends(9121==l.j?x.N:null){getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??p.clTF1}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(t){if(!t||this.getClassName()!==t._typename)return!1;delete t.evalPar;const i=this.getHisto();if(this.webcanv_hist){const a=this.getPadPainter()?.findInPrimitives("Func",p.clTH1D);a&&this.updateAxes(i,a,this.getFramePainter())}return this.$func=t,this.createTF1Histogram(t,i),this.scanContent(),!0}redraw(t){return!this._use_saved_points&&("logx"===t||"zoom"===t)&&(this.createTF1Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(t)}createTF1Histogram(t,i){const a=this.getFramePainter(),n=this.getPadPainter()?.getRootPad(!0),d=n?.fLogx,e=a?.getGrFuncs(this.second_x,this.second_y);let h=t.fXmin,r=t.fXmax,m=Math.max(t.fNpx,100);if(e?.zoom_xmin!==e?.zoom_xmax){const g=(r-h)/m;h<e.zoom_xmin&&e.zoom_xmin<r&&(h=Math.max(h,e.zoom_xmin-g)),h<e.zoom_xmax&&e.zoom_xmax<r&&(r=Math.min(r,e.zoom_xmax+g))}this._use_saved_points=t.fSave.length>3&&(p.settings.PreferSavedPoints||this.use_saved>1);const w=g=>{i.fNcells!==g+2&&(i.fNcells=g+2,i.fArray=new Float32Array(i.fNcells)),i.fArray.fill(0),i.fXaxis.fNbins=g,i.fXaxis.fXbins=[]};if(delete this._fail_eval,!this._use_saved_points){let g=!1;if(!t.evalPar)try{(0,c.Dx)(t)||(g=!0)}catch{g=!0}w(m),d?z(i.fXaxis,m,h,r):(i.fXaxis.fXmin=h,i.fXaxis.fXmax=r);for(let y=0;y<m&&!g;y++){const F=i.fXaxis.GetBinCenter(y+1);let X=0;try{X=t.evalPar(F)}catch{g=!0}g||i.setBinContent(y+1,Number.isFinite(X)?X:0)}g&&(this._fail_eval=!0),g&&t.fSave.length>3&&(this._use_saved_points=!0)}if(this._use_saved_points){m=t.fSave.length-3;let g=null;if(h=t.fSave[m+1],r=t.fSave[m+2],h===r){const y=this.getMainPainter();(0,p.isFunc)(y?.getHisto)&&(g=y?.getHisto()?.fXaxis)}if(g){w(i.fXaxis.fNbins),Object.assign(i.fXaxis,g);for(let y=0;y<m;++y){const F=t.fSave[y];i.setBinContent(y+1,Number.isFinite(F)?F:0)}}else{w(t.fNpx),i.fXaxis.fXmin=t.fXmin,i.fXaxis.fXmax=t.fXmax;for(let y=0;y<t.fNpx;++y){const F=(0,c.YI)(t,i.fXaxis.GetBinCenter(y+1));i.setBinContent(y+1,Number.isFinite(F)?F:0)}}}i.fName="Func",(0,p.setHistogramTitle)(i,t.fTitle),i.fMinimum=t.fMinimum,i.fMaximum=t.fMaximum,i.fLineColor=t.fLineColor,i.fLineStyle=t.fLineStyle,i.fLineWidth=t.fLineWidth,i.fFillColor=t.fFillColor,i.fFillStyle=t.fFillStyle,i.fMarkerColor=t.fMarkerColor,i.fMarkerStyle=t.fMarkerStyle,i.fMarkerSize=t.fMarkerSize,i.fBits|=p.kNoStats}extractAxesProperties(t){super.extractAxesProperties(t);const i=this.$func,a=i?.fSave.length??0;a>3&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,i.fSave[a-2]),this.xmax=Math.max(this.xmax,i.fSave[a-1])),i&&(this.xmin=Math.min(this.xmin,i.fXmin),this.xmax=Math.max(this.xmax,i.fXmax))}canZoomInside(t,i,a){const n=this.$func?.fSave.length??0;if(n>3&&this._use_saved_points&&"x"===t){const d=n-2;return Math.abs(this.$func.fSave[n-1]-this.$func.fSave[n-2])/d<Math.abs(a-i)}return"x"===t||"y"===t}getTF1Tooltips(t){delete this.$tmp_tooltip;const i=[this.getObjectHint()],a=this.getFramePainter()?.getGrFuncs(this.options.second_x,this.options.second_y);if(!a||!(0,p.isFunc)(this.$func?.evalPar))return i.push("grx = "+t.x,"gry = "+t.y),i;const n=a.revertAxis("x",t.x);let d=0,e=0,h=!1;try{d=this.$func.evalPar(n),e=Math.round(a.gry(d))}catch{h=!0}return i.push("x = "+a.axisAsText("x",n),"value = "+(h?"<fail>":(0,S.lg)(d,p.gStyle.fStatFormat))),h||(this.$tmp_tooltip={y:d,gry:e}),i}processTooltipEvent(t){if(this._use_saved_points)return super.processTooltipEvent(t);let i=this.draw_g?.selectChild(".tooltip_bin");if(!this.draw_g||!t)return i?.remove(),null;const a={name:this.$func?.fName,title:this.$func?.fTitle,x:t.x,y:t.y,color1:this.lineatt?.color??"green",color2:this.fillatt?.getFillColorAlt("blue")??"blue",lines:this.getTF1Tooltips(t),exact:!0,menu:!0};return t.disabled?i.remove():(i.empty()&&(i=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").style("fill","none").attr("r",(this.lineatt?.width??1)+4)),i.attr("cx",t.x).attr("cy",this.$tmp_tooltip.gry??t.y).call(this.lineatt?.func)),a}fillWebObjectOptions(t){t.fcust=this._fail_eval&&!this.use_saved?"func_fail":""}static draw(t,i,a){return(0,s.A)(function*(){const n=u(a);let d;a=n.opt,delete n.opt,n.webcanv_hist&&(d=new j.JW(t).getPadPainter()?.findInPrimitives("Func",p.clTH1D)),d||(d=(0,p.createHistogram)(p.clTH1D,100),d.fBits|=p.kNoStats),!a&&(0,j.Nn)(t)&&(a="same");const e=new f(t,d);return e.$func=i,Object.assign(e,n),e.createTF1Histogram(i,d),v.mf._drawHist(e,a)})()}}},895:($,b,l)=>{if(l.d(b,{k:()=>v}),9121==l.j)var s=l(467);var p=l(4693),S=l(1516),j=l(1069);class v extends(9121==l.j?p.TGraphPainter:null){drawBins3D(c,z){if(!(c.mode3d&&c.grx&&c.gry&&c.grz&&c.toplevel))return console.log("Frame painter missing base 3d elements");if(c.zoom_xmin!==c.zoom_xmax&&(this.options.pos3d<c.zoom_xmin||this.options.pos3d>c.zoom_xmax))return;this.createGraphDrawAttributes(!0);const u=this.optimizeBins(1e3);let f=0,o=u.length-1;if(c.zoom_ymin!==c.zoom_ymax){for(;f<o&&u[f].x<c.zoom_ymin;)f++;for(;f<o&&u[o].x>c.zoom_ymax;)o--}if(f===o)return;const t=[],i=c.grx(this.options.pos3d);let a=u[f];for(let d=f+1;d<=o;++d){const e=u[d];t.push(i,c.gry(a.x),c.grz(a.y),i,c.gry(e.x),c.grz(e.y)),a=e}const n=(0,j.Fc)(t,(0,j.DH)(this,z));c.add3DMesh(n,this,!0),c.render3D(100)}drawAxisHisto(){var c=this;return(0,s.A)(function*(){return S.TH1Painter.draw(c.getDom(),c.createHistogram(),c.options.Axis)})()}static draw(c,z,u){return(0,s.A)(function*(){return v._drawGraph(new v(c,z),u)})()}}}}]);